[tool.black]
line-length = 88
target-version = ['py39']
# Prevent Black from breaking strings aggressively
skip-string-normalization = false
# Preserve some formatting to avoid syntax errors
preview = false

[tool.isort]
profile = "black"
line_length = 88

[tool.flake8]
max-line-length = 88
extend-ignore = ["E203", "W503"]

[tool.mypy]
python_version = "3.9"
warn_return_any = false
warn_unused_configs = true
disallow_untyped_defs = false
ignore_missing_imports = true

# Allow implicit optional for now (can be tightened later)
no_implicit_optional = false

# Disable specific checks that are too strict for now
disable_error_code = [
    "assignment",
    "attr-defined",
    "misc",
    "index",
    "union-attr",
    "no-any-return",
    "var-annotated",
    "return-value",
    "arg-type",
    "import-untyped",
    "annotation-unchecked",
    "valid-type",
    "return"
]

# Exclude patterns
exclude = [
    "venv",
    "venv-enhanced",
    ".venv",
    "__pycache__",
    ".git",
    "build",
    "dist"
]

[tool.ruff]
# Exclude a variety of commonly ignored directories.
exclude = [
    "venv",
    "venv-enhanced",
    ".venv",
    "__pycache__",
    ".git",
    "build",
    "dist",
    "data/results",
    "downloads",
    "drivers",
    "reports",
    "test_reports",
    "logs",
    "screenshots",
    "screenshots_diff",
    "resources"
]

# Same as Black.
line-length = 88
indent-width = 4

# Assume Python 3.9.6+
target-version = "py39"

[tool.ruff.lint]
# Enable pycodestyle (`E`) and Pyflakes (`F`) codes by default.
# Additional rule categories that make sense for this project:
# - `I` (isort): Import sorting
# - `UP` (pyupgrade): Python syntax upgrades
# - `B` (flake8-bugbear): Additional bug and design problem detection
# - `C4` (flake8-comprehensions): Unnecessary list/tuple/dict comprehensions
# - `T10` (flake8-debugger): Debugger statements
# - `DJ` (flake8-django): Django-specific rules (if applicable)
# - `S` (flake8-bandit): Security issues (partial replacement for bandit)
# - `BLE` (blind-except): Blind exception handling
# - `FBT` (boolean-trap): Boolean positional arguments
# - `A` (flake8-builtins): Shadowing built-ins
# - `COM` (trailing-comma): Trailing comma rules
# - `C90` (mccabe): Cyclomatic complexity
# - `DTZ` (flake8-datetimez): Naive datetime usage
# - `T` (flake8-print): Print statements
# - `ERA` (eradicate): Commented-out code
# - `PD` (pandas-vet): Pandas-specific rules
# - `PGH` (pygrep-hooks): Regex patterns
# - `PL` (pylint): Pylint rules
# - `TRY` (tryceratops): Exception handling
# - `FLY` (flynt): String formatting
# - `NPY` (numpy): NumPy-specific rules
# - `AIR` (airflow): Airflow-specific rules
# - `PERF` (perflint): Performance issues
# - `FURB` (refurb): Code modernization
# - `LOG` (flake8-logging-format): Logging format
# - `G` (flake8-logging-format): Additional logging rules
# - `INP` (flake8-no-pep420): Package structure
# - `PT` (flake8-pytest-style): Pytest-specific rules
# - `Q` (flake8-quotes): Quote consistency
# - `RSE` (flake8-raise): Exception raising
# - `RET` (flake8-return): Return statement issues
# - `SLF` (flake8-self): Private member access
# - `SLOT` (flake8-slots): __slots__ usage
# - `SIM` (flake8-simplify): Code simplification
# - `TID` (flake8-tidy-imports): Import organization
# - `TCH` (flake8-type-checking): Type checking imports
# - `INT` (flake8-gettext): Gettext usage
# - `ARG` (flake8-unused-arguments): Unused arguments
# - `PTH` (flake8-use-pathlib): Pathlib usage
# - `TD` (flake8-todos): TODO comments
# - `FIX` (flake8-fixme): FIXME comments
# - `ERA` (eradicate): Commented-out code
# - `PD` (pandas-vet): Pandas rules
# - `PGH` (pygrep-hooks): Regex patterns
# - `PL` (pylint): Pylint rules
# - `TRY` (tryceratops): Exception handling
# - `FLY` (flynt): String formatting
# - `NPY` (numpy): NumPy rules
# - `AIR` (airflow): Airflow rules
# - `PERF` (perflint): Performance
# - `FURB` (refurb): Modernization
# - `LOG` (flake8-logging-format): Logging
# - `G` (flake8-logging-format): Logging
# - `INP` (flake8-no-pep420): Package structure
# - `PT` (flake8-pytest-style): Pytest
# - `Q` (flake8-quotes): Quotes
# - `RSE` (flake8-raise): Exceptions
# - `RET` (flake8-return): Returns
# - `SLF` (flake8-self): Private access
# - `SLOT` (flake8-slots): Slots
# - `SIM` (flake8-simplify): Simplification
# - `TID` (flake8-tidy-imports): Imports
# - `TCH` (flake8-type-checking): Type checking
# - `INT` (flake8-gettext): Gettext
# - `ARG` (flake8-unused-arguments): Arguments
# - `PTH` (flake8-use-pathlib): Pathlib
# - `TD` (flake8-todos): TODOs
# - `FIX` (flake8-fixme): FIXMEs
select = [
    "E",   # pycodestyle errors
    "W",   # pycodestyle warnings
    "F",   # Pyflakes
    "I",   # isort
    "UP",  # pyupgrade
    "B",   # flake8-bugbear
    "C4",  # flake8-comprehensions
    "T10", # flake8-debugger
    "BLE", # blind-except
    "FBT", # boolean-trap
    "A",   # flake8-builtins
    "COM", # trailing-comma
    "C90", # mccabe
    "DTZ", # flake8-datetimez
    "T",   # flake8-print
    "ERA", # eradicate
    "PD",  # pandas-vet
    "PGH", # pygrep-hooks
    "PL",  # pylint
    "TRY", # tryceratops
    "FLY", # flynt
    "NPY", # numpy
    "AIR", # airflow
    "PERF",# perflint
    "FURB",# refurb
    "LOG", # flake8-logging-format
    "G",   # flake8-logging-format
    "INP", # flake8-no-pep420
    "PT",  # flake8-pytest-style
    "Q",   # flake8-quotes
    "RSE", # flake8-raise
    "RET", # flake8-return
    "SLF", # flake8-self
    "SLOT",# flake8-slots
    "SIM", # flake8-simplify
    "TID", # flake8-tidy-imports
    "TCH", # flake8-type-checking
    "INT", # flake8-gettext
    "ARG", # flake8-unused-arguments
    "PTH", # flake8-use-pathlib
    "TD",  # flake8-todos
    "FIX", # flake8-fixme
    "RUF", # Ruff-specific rules
]

# Ignore some rules that are too strict or conflict with project style
ignore = [
    "COM812",  # trailing-comma: conflicts with Ruff formatter
    "E203",  # whitespace before ':' (conflicts with black)
    "T20",   # flake8-print: print found (allow in test/debug code)
    "S101",  # flake8-bandit: assert used (allow in tests)
    "PD",    # pandas-vet: too strict for this project
    "NPY",   # numpy: not using numpy extensively
    "AIR",   # airflow: not using airflow
    "ERA001",# eradicate: commented-out code (allow for now)
    "FIX002",# flake8-fixme: XXX comments (allow for now)
    "TD002", # flake8-todos: TODO format (allow for now)
    "TD003", # flake8-todos: TODO format (allow for now)
    "PLR0913", # pylint: too many arguments (allow for complex functions)
    "PLR0912", # pylint: too many branches (allow for complex logic)
    "PLR0915", # pylint: too many statements (allow for complex functions)
    "PLR2004", # pylint: magic value comparison (allow for now)
    "C901",  # mccabe: too complex (allow for complex algorithms)
    "PLR0911", # pylint: too many return statements (allow for complex logic)
]

[tool.ruff.lint.per-file-ignores]
# Tests can be more lenient
"tests/**/*" = ["S101", "T20", "PLR2004"]
# Examples and scripts can have print statements
"examples/**/*" = ["T20"]
"scripts/**/*" = ["T20"]
# Configuration files can have various patterns
"config/**/*" = ["T20", "PLR2004"]

[tool.ruff.lint.mccabe]
# Maximum cyclomatic complexity
max-complexity = 15

[tool.ruff.lint.pylint]
# Maximum number of arguments
max-args = 10
# Maximum number of branches
max-branches = 20
# Maximum number of statements
max-statements = 50
